<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.javasm.salesupply.mapper.GdGoodsDao">

    <resultMap id="BaseResultMap" type="com.javasm.salesupply.domain.entity.GdGoods">
        <!--@Table gd_goods-->
        <result property="goodsId" column="goods_id" jdbcType="INTEGER"/>
        <result property="goodsName" column="goods_name" jdbcType="VARCHAR"/>
        <result property="goodsEncode" column="goods_encode" jdbcType="VARCHAR"/>
        <result property="goodsCategory" column="goods_category" jdbcType="VARCHAR"/>
        <result property="goodsModel" column="goods_model" jdbcType="VARCHAR"/>
        <result property="goodsBrand" column="goods_brand" jdbcType="VARCHAR"/>
        <result property="goodsColor" column="goods_color" jdbcType="VARCHAR"/>
        <result property="goodsClassify" column="goods_classify" jdbcType="VARCHAR"/>
        <result property="goodsBuytype" column="goods_buytype" jdbcType="VARCHAR"/>
        <result property="goodsDistribution" column="goods_distribution" jdbcType="VARCHAR"/>
        <result property="goodsStandby" column="goods_standby" jdbcType="VARCHAR"/>
        <result property="goodsMarketprice" column="goods_marketprice" jdbcType="OTHER"/>
        <result property="goodsShoprice" column="goods_shoprice" jdbcType="OTHER"/>
        <result property="goodsType" column="goods_type" jdbcType="VARCHAR"/>
        <result property="goodsLowstock" column="goods_lowstock" jdbcType="INTEGER"/>
        <result property="goodsIsbuy" column="goods_isbuy" jdbcType="INTEGER"/>
        <result property="createBy" column="create_by" jdbcType="INTEGER"/>
        <result property="updateBy" column="update_by" jdbcType="VARCHAR"/>
        <result property="createTime" column="create_time" jdbcType="TIMESTAMP"/>
        <result property="updateTime" column="update_time" jdbcType="TIMESTAMP"/>
        <result property="remark1" column="remark1" jdbcType="VARCHAR"/>
        <result property="remark2" column="remark2" jdbcType="VARCHAR"/>
    </resultMap>

    <!--查询单个-->
    <select id="queryById" resultMap="BaseResultMap">
        select goods_id,
               goods_name,
               goods_encode,
               goods_category,
               goods_model,
               goods_brand,
               goods_color,
               goods_classify,
               goods_buytype,
               goods_distribution,
               goods_standby,
               goods_marketprice,
               goods_shoprice,
               goods_type,
               goods_lowstock,
               goods_isbuy,
               create_by,
               update_by,
               create_time,
               update_time,
               remark1,
               remark2
        from supplymarketing.gd_goods
        where goods_id = #{goodsId}
    </select>

    <!--查询指定行数据-->
    <select id="queryAllByLimit" resultMap="BaseResultMap">
        select goods_id,
               goods_name,
               goods_encode,
               goods_category,
               goods_model,
               goods_brand,
               goods_color,
               goods_classify,
               goods_buytype,
               goods_distribution,
               goods_standby,
               goods_marketprice,
               goods_shoprice,
               goods_type,
               goods_lowstock,
               goods_isbuy,
               create_by,
               update_by,
               create_time,
               update_time,
               remark1,
               remark2
        from supplymarketing.gd_goods
        limit #{offset}, #{limit}
    </select>

    <!--通过实体作为筛选条件查询-->
    <select id="queryAll" resultMap="BaseResultMap">
        select
        goods_id, goods_name, goods_encode, goods_category, goods_model, goods_brand, goods_color, goods_classify,
        goods_buytype, goods_distribution, goods_standby, goods_marketprice, goods_shoprice, goods_type, goods_lowstock,
        goods_isbuy, create_by, update_by, create_time, update_time, remark1, remark2
        from supplymarketing.gd_goods
        <where>
            <if test="goodsId != null">
                and goods_id = #{goodsId}
            </if>
            <if test="goodsName != null and goodsName != ''">
                and goods_name = #{goodsName}
            </if>
            <if test="goodsEncode != null and goodsEncode != ''">
                and goods_encode = #{goodsEncode}
            </if>
            <if test="goodsCategory != null and goodsCategory != ''">
                and goods_category = #{goodsCategory}
            </if>
            <if test="goodsModel != null and goodsModel != ''">
                and goods_model = #{goodsModel}
            </if>
            <if test="goodsBrand != null and goodsBrand != ''">
                and goods_brand = #{goodsBrand}
            </if>
            <if test="goodsColor != null and goodsColor != ''">
                and goods_color = #{goodsColor}
            </if>
            <if test="goodsClassify != null and goodsClassify != ''">
                and goods_classify = #{goodsClassify}
            </if>
            <if test="goodsBuytype != null and goodsBuytype != ''">
                and goods_buytype = #{goodsBuytype}
            </if>
            <if test="goodsDistribution != null and goodsDistribution != ''">
                and goods_distribution = #{goodsDistribution}
            </if>
            <if test="goodsStandby != null and goodsStandby != ''">
                and goods_standby = #{goodsStandby}
            </if>
            <if test="goodsMarketprice != null">
                and goods_marketprice = #{goodsMarketprice}
            </if>
            <if test="goodsShoprice != null">
                and goods_shoprice = #{goodsShoprice}
            </if>
            <if test="goodsType != null and goodsType != ''">
                and goods_type = #{goodsType}
            </if>
            <if test="goodsLowstock != null">
                and goods_lowstock = #{goodsLowstock}
            </if>
            <if test="goodsIsbuy != null">
                and goods_isbuy = #{goodsIsbuy}
            </if>
            <if test="createBy != null">
                and create_by = #{createBy}
            </if>
            <if test="updateBy != null and updateBy != ''">
                and update_by = #{updateBy}
            </if>
            <if test="createTime != null">
                and create_time = #{createTime}
            </if>
            <if test="updateTime != null">
                and update_time = #{updateTime}
            </if>
            <if test="remark1 != null and remark1 != ''">
                and remark1 = #{remark1}
            </if>
            <if test="remark2 != null and remark2 != ''">
                and remark2 = #{remark2}
            </if>
        </where>
    </select>

    <select id="findGoodsColorList" resultType="com.javasm.salesupply.domain.entity.GdGoods">
        select *
        from supplymarketing.gd_goods
        group by goods_color;
    </select>

    <select id="selectVO" resultType="com.javasm.salesupply.domain.vo.GoodsVO">
        select gg.*, gc.classify_name, gb.brand_name
        from supplymarketing.gd_brand gb,
        supplymarketing.gd_classify gc,
        supplymarketing.gd_goods gg
        <where>
            <if test="true">
                gb.brand_id = gg.goods_brand
                and gg.goods_classify = gc.classify_id
            </if>

            <if test="goodsBrand != null and goodsBrand != ''">
                and gg.goods_brand like concat(concat('%',#{goodsBrand}),'%')
            </if>
            <if test="goodsEncode != null and goodsEncode != ''">
                and gg.goods_encode like concat(concat('%',#{goodsEncode}),'%')
            </if>
            <if test="goodsType != null and goodsType != ''">
                and gg.goods_type like concat(concat('%',#{goodsType}),'%')
            </if>
            <if test="goodsColor != null and goodsColor != ''">
                and gg.goods_color like concat(concat('%',#{goodsColor}),'%')
            </if>
            <if test="goodsClassify != null and goodsClassify != ''">
                and gg.goods_classify like concat(concat('%',#{goodsClassify}),'%')
            </if>
        </where>

    </select>

    <!--新增所有列-->
    <insert id="insert" keyProperty="goodsId" useGeneratedKeys="true">
        insert into supplymarketing.gd_goods(goods_name, goods_encode, goods_category, goods_model, goods_brand,
                                             goods_color, goods_classify, goods_buytype, goods_distribution,
                                             goods_standby, goods_marketprice, goods_shoprice, goods_type,
                                             goods_lowstock, goods_isbuy, create_by, update_by, create_time,
                                             update_time, remark1, remark2)
        values (#{goodsName}, #{goodsEncode}, #{goodsCategory}, #{goodsModel}, #{goodsBrand}, #{goodsColor},
                #{goodsClassify}, #{goodsBuytype}, #{goodsDistribution}, #{goodsStandby}, #{goodsMarketprice},
                #{goodsShoprice}, #{goodsType}, #{goodsLowstock}, #{goodsIsbuy}, #{createBy}, #{updateBy},
                #{createTime}, #{updateTime}, #{remark1}, #{remark2})
    </insert>

    <!--通过主键修改数据-->
    <update id="update">
        update supplymarketing.gd_goods
        <set>
            <if test="goodsName != null and goodsName != ''">
                goods_name = #{goodsName},
            </if>
            <if test="goodsEncode != null and goodsEncode != ''">
                goods_encode = #{goodsEncode},
            </if>
            <if test="goodsCategory != null and goodsCategory != ''">
                goods_category = #{goodsCategory},
            </if>
            <if test="goodsModel != null and goodsModel != ''">
                goods_model = #{goodsModel},
            </if>
            <if test="goodsBrand != null and goodsBrand != ''">
                goods_brand = #{goodsBrand},
            </if>
            <if test="goodsColor != null and goodsColor != ''">
                goods_color = #{goodsColor},
            </if>
            <if test="goodsClassify != null and goodsClassify != ''">
                goods_classify = #{goodsClassify},
            </if>
            <if test="goodsBuytype != null and goodsBuytype != ''">
                goods_buytype = #{goodsBuytype},
            </if>
            <if test="goodsDistribution != null and goodsDistribution != ''">
                goods_distribution = #{goodsDistribution},
            </if>
            <if test="goodsStandby != null and goodsStandby != ''">
                goods_standby = #{goodsStandby},
            </if>
            <if test="goodsMarketprice != null">
                goods_marketprice = #{goodsMarketprice},
            </if>
            <if test="goodsShoprice != null">
                goods_shoprice = #{goodsShoprice},
            </if>
            <if test="goodsType != null and goodsType != ''">
                goods_type = #{goodsType},
            </if>
            <if test="goodsLowstock != null">
                goods_lowstock = #{goodsLowstock},
            </if>
            <if test="goodsIsbuy != null">
                goods_isbuy = #{goodsIsbuy},
            </if>
            <if test="createBy != null">
                create_by = #{createBy},
            </if>
            <if test="updateBy != null and updateBy != ''">
                update_by = #{updateBy},
            </if>
            <if test="createTime != null">
                create_time = #{createTime},
            </if>
            <if test="updateTime != null">
                update_time = #{updateTime},
            </if>
            <if test="remark1 != null and remark1 != ''">
                remark1 = #{remark1},
            </if>
            <if test="remark2 != null and remark2 != ''">
                remark2 = #{remark2},
            </if>
        </set>
        where goods_id = #{goodsId}
    </update>

    <!--通过主键删除-->
    <delete id="deleteById">
        delete
        from supplymarketing.gd_goods
        where goods_id = #{goodsId}
    </delete>

</mapper>